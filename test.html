<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>ë˜ë°›ì“° _ ê¸‰ìˆ˜í‘œ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/fonts-archive/Paperlogy/subsets/Paperlogy-dynamic-subset.css" type="text/css"/>
    <meta name="theme-color" content="#FFD700">
    <style>
        body {
            font-family: "Paperlogy", sans-serif;
            background-color: #FFFBEB; /* amber-50 */
            padding-top: 70px;
            padding-bottom: 40px;
            color: #4B5563;
        }

        /* ìƒë‹¨ë°” ìŠ¤íƒ€ì¼ */
        .header-fixed {
            position: fixed; top: 0; left: 0; right: 0; z-index: 50;
            background-color: #FFD700; 
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            height: 56px;
        }
        
        .nav-link {
            display: flex; align-items: center; justify-content: center;
            padding: 8px 12px;
            border-radius: 8px;
            font-weight: 600;
            color: #1F2937;
            text-decoration: none;
            transition: background-color 0.2s;
        }
        
        .nav-link:hover, .nav-link.active {
            background-color: #FBBF24; /* amber-400 */
        }
        
        /* íˆ´íŒ */
        .tooltip-container { position: relative; }
        .tooltip-container::after {
            content: attr(data-tooltip);
            position: absolute; bottom: -40px; left: 50%; transform: translateX(-50%);
            background-color: rgba(0, 0, 0, 0.8); color: white;
            padding: 6px 12px; border-radius: 6px; font-size: 0.8rem; white-space: nowrap;
            opacity: 0; visibility: hidden; transition: opacity 0.2s; pointer-events: none;
        }
        .tooltip-container:hover::after { opacity: 1; visibility: visible; }

        /* ì• ë‹ˆë©”ì´ì…˜ */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-fade-in { animation: fadeIn 0.5s ease-out forwards; }
    </style>
</head>

<body class="antialiased min-h-screen">

    <header class="header-fixed flex items-center justify-center px-4">
        <nav class="flex items-center space-x-3">
            <a href="index.html" class="nav-link tooltip-container" aria-label="í™ˆ" data-tooltip="í™ˆìœ¼ë¡œ ì´ë™">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"></path></svg>
            </a>
            <a href="test.html" class="nav-link active" aria-label="ê¸‰ìˆ˜">ê¸‰ìˆ˜</a>
            <a href="list.html" class="nav-link" aria-label="ëª©ì°¨">ëª©ì°¨</a>
            <a href="quiz.html" class="nav-link" aria-label="í€´ì¦ˆ">í€´ì¦ˆ</a>
            <a href="rules.html" class="nav-link" aria-label="ë¹„ë²•">ë¹„ë²•</a>
        </nav>
    </header>

    <main class="max-w-4xl mx-auto px-4 py-4">
        
        <div class="text-center mb-8 animate-fade-in">
            <h1 class="text-3xl font-bold text-amber-900 mb-2 flex items-center justify-center gap-2">
                <span>ğŸ”¢</span> ê¸‰ìˆ˜í‘œ
            </h1>
            <p class="text-amber-700 text-sm mb-6">í•™ë…„ì„ ì„ íƒí•˜ê³  ë„ì „í•  ê¸‰ìˆ˜ë¥¼ í´ë¦­í•˜ì„¸ìš”.</p>

            <div class="inline-flex bg-white p-1 rounded-full shadow-sm border border-amber-200">
                <button onclick="setGrade(1)" id="btn-1" class="px-5 py-2 rounded-full text-sm font-bold transition-all duration-200">1í•™ë…„</button>
                <button onclick="setGrade(2)" id="btn-2" class="px-5 py-2 rounded-full text-sm font-bold transition-all duration-200">2í•™ë…„</button>
                <button onclick="setGrade(3)" id="btn-3" class="px-5 py-2 rounded-full text-sm font-bold transition-all duration-200">3í•™ë…„</button>
            </div>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-5">
            <div id="col-left" class="flex flex-col gap-5"></div>
            <div id="col-right" class="flex flex-col gap-5"></div>
        </div>
    </main>

    <div id="toast" class="hidden fixed bottom-24 left-1/2 transform -translate-x-1/2 bg-gray-800/90 backdrop-blur text-white px-6 py-3 rounded-full shadow-2xl flex items-center z-50 transition-opacity duration-300 pointer-events-none">
        <i data-lucide="check" class="w-5 h-5 mr-2 text-green-400"></i>
        <span id="toast-msg" class="font-medium text-sm">ë©”ì‹œì§€</span>
    </div>

    <script>
        let activeGrade = 1;

        // ìƒ‰ìƒ ì„¤ì • (í•™ë…„ë³„) - í…Œë§ˆì— ë§ê²Œ ì•½ê°„ ë¶€ë“œëŸ¬ìš´ í†¤ìœ¼ë¡œ ì¡°ì •
        const styles = {
            1: { 
                activeBtn: 'bg-indigo-500 text-white shadow-md transform scale-105', 
                inactiveBtn: 'text-gray-500 hover:text-indigo-500 hover:bg-indigo-50',
                bar: 'bg-indigo-500', 
                text: 'text-indigo-600', 
                hoverGradient: 'group-hover:to-indigo-50/50' 
            },
            2: { 
                activeBtn: 'bg-emerald-500 text-white shadow-md transform scale-105', 
                inactiveBtn: 'text-gray-500 hover:text-emerald-500 hover:bg-emerald-50',
                bar: 'bg-emerald-500', 
                text: 'text-emerald-600', 
                hoverGradient: 'group-hover:to-emerald-50/50' 
            },
            3: { 
                activeBtn: 'bg-rose-500 text-white shadow-md transform scale-105', 
                inactiveBtn: 'text-gray-500 hover:text-rose-500 hover:bg-rose-50',
                bar: 'bg-rose-500', 
                text: 'text-rose-500', 
                hoverGradient: 'group-hover:to-rose-50/50' 
            }
        };

        // ë”ë¯¸ í…ìŠ¤íŠ¸ (ë°°ê²½ ì¥ì‹ìš©)
        const dummySentences = [
            "í•™êµì— ë‹¤ë…€ì™”ìŠµë‹ˆë‹¤.", "ì¹œêµ¬ì™€ ì‚¬ì´ì¢‹ê²Œ.", 
            "ì„ ìƒë‹˜ ë§ì”€.", "ë°¥ì„ ë§›ìˆê²Œ.", "ì¦ê±°ìš´ ìƒí™œ."
        ];

        // ì´ˆê¸°í™”
        window.onload = () => {
            renderLevels();
            lucide.createIcons();
        };

        // í•™ë…„ ë³€ê²½ í•¨ìˆ˜
        function setGrade(grade) {
            activeGrade = grade;
            
            // ë²„íŠ¼ ìŠ¤íƒ€ì¼ ì—…ë°ì´íŠ¸
            [1, 2, 3].forEach(g => {
                const btn = document.getElementById(`btn-${g}`);
                const style = styles[activeGrade]; // í˜„ì¬ í™œì„± í•™ë…„ì˜ ìŠ¤íƒ€ì¼ í…Œë§ˆë¥¼ ë”°ë¦„ (ì„ íƒ ì‚¬í•­)
                
                // ê° ë²„íŠ¼ ìì‹ ë§Œì˜ ìŠ¤íƒ€ì¼ ì ìš©
                const targetStyle = styles[grade];
                
                if (g === grade) {
                    btn.className = `px-5 py-2 rounded-full text-sm font-bold transition-all duration-200 ${styles[g].activeBtn}`;
                } else {
                    btn.className = `px-5 py-2 rounded-full text-sm font-bold transition-all duration-200 ${styles[g].inactiveBtn}`;
                }
            });

            // ì¹´ë“œ ë‹¤ì‹œ ê·¸ë¦¬ê¸°
            renderLevels();
        }

        // ì¹´ë“œ ë Œë”ë§ í•¨ìˆ˜
        function renderLevels() {
            const colLeft = document.getElementById('col-left');
            const colRight = document.getElementById('col-right');
            colLeft.innerHTML = '';
            colRight.innerHTML = '';

            const currentStyle = styles[activeGrade];

            // 1~12ê¸‰ ì¹´ë“œ ìƒì„±
            for (let i = 1; i <= 12; i++) {
                const cardHtml = createCardHTML(i, currentStyle);
                if (i <= 6) colLeft.innerHTML += cardHtml;
                else colRight.innerHTML += cardHtml;
            }
            
            // ì•„ì´ì½˜ ìƒˆë¡œê³ ì¹¨
            lucide.createIcons();
        }

        // ê°œë³„ ì¹´ë“œ HTML ìƒì„±
        function createCardHTML(level, style) {
            // ë°°ê²½ìš© íë¦¿í•œ í…ìŠ¤íŠ¸ ìƒì„±
            const dummyHtml = dummySentences.map(t => `<span class="text-[10px] text-gray-400 mr-2 opacity-50 inline-block">${t}</span>`).join('');
            
            return `
            <div onclick="alert('${activeGrade}í•™ë…„ ${level}ê¸‰ í•™ìŠµ í˜ì´ì§€ë¡œ ì´ë™í•©ë‹ˆë‹¤.')" 
                class="group relative bg-white rounded-2xl shadow-sm hover:shadow-lg hover:-translate-y-1 transition-all duration-300 overflow-hidden border border-amber-100 cursor-pointer h-24 w-full animate-fade-in">
                
                <div class="absolute inset-0 p-4 select-none pointer-events-none overflow-hidden bg-white">
                    <div class="opacity-30 filter blur-[2px] transform scale-105 whitespace-nowrap leading-relaxed">
                        ${dummyHtml} ${dummyHtml} <br> ${dummyHtml}
                    </div>
                    <div class="absolute inset-0 bg-gradient-to-r from-white via-white/80 to-transparent opacity-90 group-hover:opacity-80 transition-opacity ${style.hoverGradient}"></div>
                </div>

                <div class="absolute inset-0 flex items-center justify-between px-6 z-10">
                    <div class="flex items-center space-x-5">
                        <div class="w-2 h-12 rounded-full shadow-sm ${style.bar} group-hover:scale-y-110 transition-transform"></div>
                        
                        <div>
                            <span class="text-sm text-gray-400 font-bold block mb-0.5">${activeGrade}í•™ë…„</span>
                            <span class="text-3xl font-black tracking-tight ${style.text}">${level}ê¸‰</span>
                        </div>
                    </div>
                    
                    <button onclick="event.stopPropagation(); copyToClipboard('${level}ê¸‰')" 
                        class="p-2.5 bg-amber-50 hover:bg-amber-100 text-amber-400 hover:text-amber-600 rounded-full transition-colors" title="ë§í¬ ë³µì‚¬">
                        <i data-lucide="share-2" class="w-5 h-5"></i>
                    </button>
                </div>
            </div>`;
        }

        // í† ìŠ¤íŠ¸ ë©”ì‹œì§€
        function triggerToast(message) {
            const toast = document.getElementById('toast');
            const msgSpan = document.getElementById('toast-msg');
            msgSpan.innerText = message;
            toast.classList.remove('hidden');
            toast.classList.remove('opacity-0');
            
            setTimeout(() => {
                toast.classList.add('opacity-0');
                setTimeout(() => toast.classList.add('hidden'), 300);
            }, 2000);
        }

        // í´ë¦½ë³´ë“œ ë³µì‚¬
        function copyToClipboard(text) {
            // ì‹¤ì œ êµ¬í˜„ ì‹œì—ëŠ” í•´ë‹¹ ê¸‰ìˆ˜ì˜ URLì„ ìƒì„±í•´ì•¼ í•¨
            const url = `${window.location.origin}/test.html?grade=${activeGrade}&level=${text.replace('ê¸‰','')}`;
            
            navigator.clipboard.writeText(url).then(() => {
                triggerToast(`${activeGrade}í•™ë…„ ${text} ì£¼ì†Œê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤.`);
            }).catch(err => {
                console.error('ë³µì‚¬ ì‹¤íŒ¨', err);
                triggerToast('ë³µì‚¬ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
            });
        }
    </script>
</body>
</html>